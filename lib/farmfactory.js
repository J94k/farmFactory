var farmFactory=function(){"use strict";n=t={exports:{}},n.exports=e;function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(t){return typeof t}:n.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n;var t,a=function(){return(a=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function v(s,o,r,u){return new(r=r||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function a(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(n,a)}i((u=u.apply(s,o||[])).next())})}function w(n,a){var i,s,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,s=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){r.label=e[1];break}if(6===e[0]&&r.label<o[1]){r.label=o[1],o=e;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(e);break}o[2]&&r.ops.pop(),r.trys.pop();continue}e=a.call(n,r)}catch(t){e=[6,t],s=0}finally{i=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function i(t){h=a(a({},h),t)}var h={opts:null,web3:null,account:null},s="ff-modals-root",o=function(t){var a=this;this.open=function(t){void 0===t&&(t={});var e,e=(n={title:a.opts.title,content:a.opts.content},e=void 0===(e=n.title)?"":e,n=n.content,'\n  <div class="ff-overlay">\n    <div class="ff-modal">\n      <div class="ff-modal-headline">\n        <div class="ff-modal-title">'+e+'</div>\n        <button class="ff-modal-close" type="button" aria-label="Close the dialog">\n          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path fill="currentColor" d="M18.3 5.70997C17.91 5.31997 17.28 5.31997 16.89 5.70997L12 10.59L7.10997 5.69997C6.71997 5.30997 6.08997 5.30997 5.69997 5.69997C5.30997 6.08997 5.30997 6.71997 5.69997 7.10997L10.59 12L5.69997 16.89C5.30997 17.28 5.30997 17.91 5.69997 18.3C6.08997 18.69 6.71997 18.69 7.10997 18.3L12 13.41L16.89 18.3C17.28 18.69 17.91 18.69 18.3 18.3C18.69 17.91 18.69 17.28 18.3 16.89L13.41 12L18.3 7.10997C18.68 6.72997 18.68 6.08997 18.3 5.70997Z"></path>\n          </svg>\n        </button>\n      </div>\n      <div class="ff-modal-content">\n        '+(void 0===n?"":n)+"\n      </div>\n    </div>\n  </div>\n"),n=document.getElementById(s);n.innerHTML=e,a.elems={root:n=n,overlay:n.querySelector(".ff-overlay"),modal:n.querySelector(".ff-modal"),closeButton:n.querySelector(".ff-modal-close"),title:n.querySelector(".ff-modal-title"),content:n.querySelector(".ff-modal-content")},null!=t&&t.title&&(a.elems.title.innerText=t.title),a.elems.overlay.addEventListener("click",a.close),a.elems.modal.addEventListener("click",function(t){t.stopPropagation()}),a.elems.closeButton.addEventListener("click",a.close),a.opts.onOpen.bind(a)(t)},this.close=function(){a.elems.root.innerHTML=""},this.opts=t},g=new o({onOpen:function(t){t=(void 0===t?{}:t).message;this.elems.root.querySelector(".ff-modal-content").innerHTML=t||"Something went wrong"}}),r=(u.prototype.addHandler=function(t){var e=this;this.handlers.push(t.bind({unsubscribe:function(){e.removeHandler(t)}}))},u.prototype.removeHandler=function(t){t=this.handlers.indexOf(t);this.handlers.splice(t,1)},u.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.error(t)}})},u);function u(t){this.name=t,this.handlers=[]}function l(){this.events={}}function d(){return v(void 0,void 0,void 0,function(){var e,n,a;return w(this,function(t){switch(t.label){case 0:return a=h.opts,[4,(e=h.web3).eth.getChainId()];case 1:return n=t.sent(),(n={1:"mainnet",3:"ropsten",4:"rinkeby",42:"kovan",56:"bsc",97:"bsc_test"}[n])&&n.toLowerCase()===a.networkName.toLowerCase()?[4,e.eth.getAccounts()]:(g.open({title:"Error",message:"We've detected that you need to switch your wallet's network from <b>"+n+"</b> to <b>"+a.networkName+"</b> network."}),[2]);case 2:return a=t.sent(),a=a[0],i({account:a}),a?(console.log("account connected"),y.dispatch("account connected")):b(),[2]}})})}function c(){return v(void 0,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,p.connect()];case 1:return e=t.sent(),m(e),e.on("accountsChanged",function(t){console.log("provider account changed",t),d()}),e.on("chainChanged",function(t){console.log("provider chain changed",t),d()}),e.on("networkChanged",function(t){console.log("provider network changed",t),d()}),[4,d()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),[3,4];case 4:return[2]}})})}var p,f,y=new(l.prototype.getEvent=function(t){var e=this.events[t];return e||(e=new r(t),this.events[t]=e),e},l.prototype.subscribe=function(t,e){t=this.getEvent(t);return t.addHandler(e),{event:t,handler:e}},l.prototype.unsubscribe=function(t,e){this.getEvent(t).removeHandler(e)},l.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.getEvent(t);t&&t.call.apply(t,e)},l.prototype.once=function(t,n){var a=this.getEvent(t),i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.apply(void 0,t)&&a.removeHandler(i)};return a.addHandler(i),{event:a,handlerWrapper:i}},l),m=function(t){window.Web3?(t=new window.Web3(t),i({web3:t}),console.log("web3 initialized"),y.dispatch("web3 init")):g.open({message:"Web3 is required"})},b=function(){return v(void 0,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return console.log("Killing the wallet connection",f),f.close?[4,f.close()]:[3,2];case 1:t.sent(),f=null,t.label=2;case 2:return[4,p.clearCachedProvider()];case 3:return t.sent(),i({account:null}),console.log("finalize disconnect"),[2]}})})},k=function(){var t=h.opts;(p=new window.Web3Modal.default({cacheProvider:!0,providerOptions:(null===(t=t.wallet)||void 0===t?void 0:t.providerOptions)||{},disableInjectedProvider:!1})).on("connect",function(t){return v(void 0,void 0,void 0,function(){return w(this,function(t){return console.log("web3modal initialized"),[2]})})}),p.on("disconnect",function(){return v(void 0,void 0,void 0,function(){return w(this,function(t){return console.log("web3modal disconnected"),[2]})})}),p.on("error",function(t){console.log("web3modal error:",t)}),p.cachedProvider&&c()},T=c,M={farm:[{inputs:[{internalType:"address",name:"_rewardsToken",type:"address"},{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"uint256",name:"_rewardsDuration",type:"uint256"},{internalType:"uint256",name:"_stakingTokensDecimal",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Recovered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newDuration",type:"uint256"}],name:"RewardsDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRewardForDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastTimeRewardApplicable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"a",type:"uint256"},{internalType:"uint256",name:"b",type:"uint256"}],name:"min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"reward",type:"uint256"}],name:"notifyRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"periodFinish",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"n",type:"uint256"},{internalType:"uint256",name:"e",type:"uint256"}],name:"pow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rewardsDuration",type:"uint256"}],name:"setRewardsDuration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingTokensDecimalRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],rewards:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"string"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"from",type:"address"}],name:"getAvailableBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokensMinted",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"value",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isMinter",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeFor",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_unfreezeTimestamp",type:"uint256"},{name:"_subsequentUnlock",type:"bool"}],name:"mintWithFreeze",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"maxSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}]};M.staking=M.rewards;function S(t,e){var n=h.web3;return H[e]?Promise.resolve(H[e]):new n.eth.Contract(t,e)}function x(t,e){return new window.BigNumber(t).times(new window.BigNumber(10).pow(e)).toString(10)}function L(t){if(!t)return t;if(/^\d+$/.test(t))return t;var e=Number(t).toFixed(5);return/0\.00000/.test(e)&&(e=Number(t).toFixed(8)),/0\.0000000/.test(e)?t:e}function A(t,e,n){var a;return t&&(a="function"==typeof t?t(e,n):t),a}var H={},q=new o({title:"Deposit",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to deposit:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Deposit</button>\n    </div>\n  ',onOpen:function(t){var e=this,a=t.contracts,i=t.stakingDecimals,n=t.stakingTokenName,s=h.opts.networkName,o=h.account,r=!1,u=this.elems.root.querySelector(".ff-text-field-label"),l=this.elems.root.querySelector(".ff-text-field"),d=this.elems.root.querySelector(".ff-modal-buttons"),c=this.elems.root.querySelector(".ff-button");a.staking.methods.balanceOf(o).call().then(function(t){t=L(Number(t)/Math.pow(10,i));u.innerHTML="Available to deposit: <b>"+t+" "+n+"</b>"}),c.addEventListener("click",function(){return v(e,void 0,void 0,function(){var e,n=this;return w(this,function(t){return r||0<(e=Number(l.value))&&(r=!0,c.disabled=!0,c.innerHTML='<div class="ff-loader"></div>',e=x(e,i),a.farm.methods.stake(e).send({from:o}).on("transactionHash",function(t){var e=document.createElement("div");e.classList.add("ff-transaction-link"),e.innerHTML='Pending transaction: <a href="https://'+s.toLowerCase()+".etherscan.io/tx/"+t+'" target="_blank">'+t+"</a>",n.elems.content.insertBefore(e,d)}).on("error",function(t){console.error(t),g.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){y.dispatch("deposit success"),g.open({title:"Transaction successful",message:"The tokens were credited to the contract."})})),[2]})})})}}),E=new o({title:"Withdraw",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to withdraw:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Withdraw</button>\n    </div>\n  ',onOpen:function(t){var e=this,a=t.contracts,i=t.rewardsDecimals,n=t.rewardsTokenName,s=h.opts.networkName,o=h.account,r=!1,u=this.elems.root.querySelector(".ff-text-field-label"),l=this.elems.root.querySelector(".ff-text-field"),d=this.elems.root.querySelector(".ff-modal-buttons"),c=this.elems.root.querySelector(".ff-button");a.farm.methods.balanceOf(o).call().then(function(t){t=L(Number(t)/Math.pow(10,i));u.innerHTML="Available to withdraw: <b>"+t+" "+n+"</b>"}),c.addEventListener("click",function(){return v(e,void 0,void 0,function(){var e,n=this;return w(this,function(t){return r||0<(e=Number(l.value))&&(r=!0,c.disabled=!0,c.innerHTML='<div class="ff-loader"></div>',e=x(e,i),a.farm.methods.withdraw(e).send({from:o}).on("transactionHash",function(t){var e=document.createElement("div");e.classList.add("ff-transaction-link"),e.innerHTML='Pending transaction: <a href="https://'+s.toLowerCase()+".etherscan.io/tx/"+t+'" target="_blank">'+t+"</a>",n.elems.content.insertBefore(e,d)}).on("error",function(t){console.error(t),g.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){y.dispatch("withdraw success"),g.open({title:"Transaction successful",message:"The tokens were credited to your account."})})),[2]})})})}});function C(t){var e=this;this.init=function(){return v(e,void 0,void 0,function(){var r,u,l,d,c,p,f=this;return w(this,function(t){switch(t.label){case 0:return r=this.opts,u=r.farmAddress,l=r.rewardsAddress,p=r.stakingAddress,this.elems.unlockButton.classList.add("ff-hidden"),d=this,[4,(o={farmAddress:u,rewardsAddress:l,stakingAddress:p},Promise.all([S(M.farm,o.farmAddress),S(M.rewards,o.rewardsAddress),S(M.staking,o.stakingAddress)]).then(function(t){var e=t[0],n=t[1],t=t[2];return{farm:H[o.farmAddress]=e,rewards:H[o.rewardsAddress]=n,staking:H[o.stakingAddress]=t}}))];case 1:return d.contracts=t.sent(),[4,Promise.all([this.contracts.staking.methods.name().call(),this.contracts.staking.methods.symbol().call(),this.contracts.staking.methods.decimals().call(),this.contracts.rewards.methods.name().call(),this.contracts.rewards.methods.symbol().call(),this.contracts.rewards.methods.decimals().call()])];case 2:return c=t.sent(),r=c[0],u=c[1],l=c[2],p=c[3],d=c[4],c=c[5],this.state.stakingTokenSymbol=u,this.state.rewardsTokenSymbol=d,this.state.stakingDecimals=l,this.state.rewardsDecimals=c,this.elems.rewardsTokenSymbol.innerHTML=d,this.elems.stakingTokenSymbol.innerHTML=u,this.elems.title.innerHTML=d+"-"+u,e=this.opts,a=(n={stakingTokenName:r,stakingTokenSymbol:u,rewardsTokenName:p,rewardsTokenSymbol:d}).stakingTokenName,i=n.stakingTokenSymbol,s=n.rewardsTokenName,n=n.rewardsTokenSymbol,i=A(e.stakingTokenIcon,a,i),n=A(e.rewardsTokenIcon,s,n),p=i&&n?{staking:i,rewards:n}:null,this.elems.tokenIcons.innerHTML=p?'\n        <img class="ff-widget-token-icon" src="'+p.rewards+'" />\n        <img class="ff-widget-token-icon" src="'+p.staking+'" />\n      ':"","function"==typeof this.opts.apy?this.opts.apy().then(function(t){f.elems.apyValue.innerHTML=t+"%"}):this.elems.apyValue.innerHTML=this.opts.apy+"%",this.elems.earnTokenName.innerHTML=d,this.initTimer(),this.updateValues(),y.subscribe("deposit success",this.updateValues),y.subscribe("withdraw success",this.updateValues),[2]}var e,n,a,i,s,o})})},this.initTimer=function(){return v(e,void 0,void 0,function(){var e,n,i,s=this;return w(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.contracts.farm.methods.periodFinish().call()];case 1:return e=t.sent(),[3,3];case 2:return n=t.sent(),console.error(n),[2];case 3:return 0<(i=Number(e.toString()))-Date.now()/1e3?setInterval(function(){var t=Math.floor((1e3*i-Date.now())/1e3),e=Math.floor(t/86400);t-=86400*e;var n=Math.floor(t/3600)%24;t-=3600*n;var a=Math.floor(t/60)%60,t=(t-=60*a)%60,t=(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(a<10?"0"+a:a)+":"+(t<10?"0"+t:t);s.elems.timer.innerHTML=t},1e3):this.elems.timer.innerHTML="Farming not started yet",[2]}})})},this.updateValues=function(){return v(e,void 0,void 0,function(){var e,n,a,i;return w(this,function(t){switch(t.label){case 0:return a=h.account,[4,Promise.all([this.contracts.farm.methods.balanceOf(a).call(),this.contracts.farm.methods.earned(a).call(),this.contracts.staking.methods.allowance(a,this.opts.farmAddress).call()])];case 1:return i=t.sent(),e=i[0],n=i[1],a=i[2],0===Number(a)&&this.elems.approveButton.classList.remove("ff-hidden"),i=this.state,a=i.stakingDecimals,i=i.rewardsDecimals,this.elems.earnedAmount.innerText=L(n/Math.pow(10,i)),this.elems.stakedAmount.innerText=L(e/Math.pow(10,a)),0<n&&(this.elems.harvestButton.disabled=!1),0<e&&(this.elems.withdrawButton.disabled=!1),this.elems.depositButton.disabled=!1,[2]}})})},this.opts=t,this.elems={},this.state={};var n=t.farmAddress,a=t.rewardsAddress,i=t.stakingAddress;if(!n||!a||!i)throw new Error('Widget requires "farmAddress", "rewardsAddress", "stakingAddress" options');this.injectHtml(t),y.subscribe("account connected",this.init)}return{init:function(n){return v(void 0,void 0,void 0,function(){return w(this,function(t){if(!n)throw new Error("options required");if("https:"!==location.protocol)throw new Error("FarmFactory requires HTTPS connection");var e;return i({opts:n}),(e=document.createElement("div")).setAttribute("id",s),document.body.appendChild(e),k(),[2]})})},Widget:(C.prototype.injectHtml=function(i){var t=this,e=document.getElementById(i.selector);e.classList.add("ff-widget"),e.innerHTML='\n  <div class="ff-widget-headline">\n    <div class="ff-widget-token-icons">\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-title-and-timer">\n      <div class="ff-widget-title">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-timer">--:--:--:--</div>\n    </div>\n  </div>\n  <div class="ff-widget-section">\n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">APY:</div>\n      <div class="ff-widget-value ff-widget-apy">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>  \n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">Earn:</div>\n      <div class="ff-widget-value ff-widget-earn-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>  \n  </div>\n  </div>\n  <div class="ff-widget-section">\n    <div class="ff-widget-section-title">\n      <b class="ff-rewards-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Earned\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-earned-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-harvest-button" type="button" disabled>Harvest</button>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-section">\n    <div class="ff-widget-section-title">\n      <b class="ff-staking-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Staked\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-staked-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-deposit-button" type="button" disabled>Deposit</button>\n        <button class="ff-button ff-widget-withdraw-button" type="button" disabled>Withdraw</button>\n      </div>\n    </div>\n  </div>\n  <button class="ff-button ff-widget-unlock-button" type="button">Unlock wallet</button>\n  <button class="ff-button ff-widget-approve-button ff-hidden" type="button">Approve contract</button>\n';var n=e.querySelector(".ff-widget-token-icons"),a=e.querySelector(".ff-widget-title"),s=e.querySelector(".ff-widget-timer"),o=e.querySelector(".ff-rewards-token-name"),r=e.querySelector(".ff-staking-token-name"),u=e.querySelector(".ff-widget-apy"),l=e.querySelector(".ff-widget-earn-token-name"),d=e.querySelector(".ff-widget-earned-amount"),c=e.querySelector(".ff-widget-staked-amount"),p=e.querySelector(".ff-widget-unlock-button"),f=e.querySelector(".ff-widget-approve-button"),y=e.querySelector(".ff-widget-deposit-button"),m=e.querySelector(".ff-widget-withdraw-button"),b=e.querySelector(".ff-widget-harvest-button");this.elems={root:e,tokenIcons:n,title:a,timer:s,rewardsTokenSymbol:o,stakingTokenSymbol:r,apyValue:u,earnTokenName:l,earnedAmount:d,stakedAmount:c,unlockButton:p,approveButton:f,depositButton:y,withdrawButton:m,harvestButton:b},p.addEventListener("click",function(){T()});p=function(e,n){var a=e.innerHTML,i=!1;e.addEventListener("click",function(){return v(t,void 0,void 0,function(){return w(this,function(t){switch(t.label){case 0:return i?[2]:(i=!0,e.disabled=!0,e.innerHTML='<div class="ff-loader"></div>',[4,n()]);case 1:return t.sent(),e.disabled=!1,e.innerHTML=a,[2]}})})})};p(f,function(){return v(t,void 0,void 0,function(){var e,n,a;return w(this,function(t){switch(t.label){case 0:n=h.web3,a=h.account,e=i.farmAddress,n=n.utils.toBN("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.contracts.staking.methods.approve(e,n).send({from:a})];case 2:return t.sent(),this.elems.approveButton.classList.add("ff-hidden"),[3,4];case 3:return a=t.sent(),console.error(a),g.open(a.message),[3,4];case 4:return[2]}})})}),y.addEventListener("click",function(){q.open({contracts:t.contracts,stakingDecimals:t.state.stakingDecimals,stakingTokenSymbol:t.state.stakingTokenSymbol})}),m.addEventListener("click",function(){E.open({contracts:t.contracts,rewardsDecimals:t.state.rewardsDecimals,rewardsTokenSymbol:t.state.rewardsTokenSymbol})}),p(b,function(){return v(t,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:e=h.account,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.contracts.farm.methods.getReward().send({from:e})];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),g.open(e.message),[3,4];case 4:return[2]}})})})},C)}}();
