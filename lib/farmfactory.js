var farmFactory=function(){"use strict";n=t={exports:{}},n.exports=e;function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(t){return typeof t}:n.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n;var t,a=function(){return(a=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function k(i,o,r,u){return new(r=r||Promise)(function(t,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function a(t){try{s(u.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(n,a)}s((u=u.apply(i,o||[])).next())})}function T(n,a){var s,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,i=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(!(o=0<(o=r.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){r.label=e[1];break}if(6===e[0]&&r.label<o[1]){r.label=o[1],o=e;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(e);break}o[2]&&r.ops.pop(),r.trys.pop();continue}e=a.call(n,r)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function s(t){x=a(a({},x),t)}var x={opts:null,web3:null,account:null},i="ff-modals-root",o=function(t){var a=this;this.open=function(t){void 0===t&&(t={});var e,e=(n={title:a.opts.title,content:a.opts.content},e=void 0===(e=n.title)?"":e,n=n.content,'\n  <div class="ff-overlay">\n    <div class="ff-modal">\n      <div class="ff-modal-headline">\n        <div class="ff-modal-title">'+e+'</div>\n        <button class="ff-modal-close" type="button" aria-label="Close the dialog">\n          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path fill="currentColor" d="M18.3 5.70997C17.91 5.31997 17.28 5.31997 16.89 5.70997L12 10.59L7.10997 5.69997C6.71997 5.30997 6.08997 5.30997 5.69997 5.69997C5.30997 6.08997 5.30997 6.71997 5.69997 7.10997L10.59 12L5.69997 16.89C5.30997 17.28 5.30997 17.91 5.69997 18.3C6.08997 18.69 6.71997 18.69 7.10997 18.3L12 13.41L16.89 18.3C17.28 18.69 17.91 18.69 18.3 18.3C18.69 17.91 18.69 17.28 18.3 16.89L13.41 12L18.3 7.10997C18.68 6.72997 18.68 6.08997 18.3 5.70997Z"></path>\n          </svg>\n        </button>\n      </div>\n      <div class="ff-modal-content">\n        '+(void 0===n?"":n)+"\n      </div>\n    </div>\n  </div>\n"),n=document.getElementById(i);n.innerHTML=e,a.elems={root:n=n,overlay:n.querySelector(".ff-overlay"),modal:n.querySelector(".ff-modal"),closeButton:n.querySelector(".ff-modal-close"),title:n.querySelector(".ff-modal-title"),content:n.querySelector(".ff-modal-content")},null!=t&&t.title&&(a.elems.title.innerText=t.title),a.elems.overlay.addEventListener("click",a.close),a.elems.modal.addEventListener("click",function(t){t.stopPropagation()}),a.elems.closeButton.addEventListener("click",a.close),a.opts.onOpen.bind(a)(t)},this.close=function(){a.elems.root.innerHTML=""},this.opts=t},L=new o({onOpen:function(t){t=(void 0===t?{}:t).message;this.elems.root.querySelector(".ff-modal-content").innerHTML=t||"Something went wrong"}}),r=(u.prototype.addHandler=function(t){var e=this;this.handlers.push(t.bind({unsubscribe:function(){e.removeHandler(t)}}))},u.prototype.removeHandler=function(t){t=this.handlers.indexOf(t);this.handlers.splice(t,1)},u.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.error(t)}})},u);function u(t){this.name=t,this.handlers=[]}function l(){this.events={}}function d(){return k(void 0,void 0,void 0,function(){var e,n,a;return T(this,function(t){switch(t.label){case 0:return a=x.opts,[4,(e=x.web3).eth.getChainId()];case 1:return n=t.sent(),console.log("web3 chain ID:",n),(n={1:"mainnet",5:"goerli",56:"bsc",97:"bsc_test",100:"xdai",137:"matic",250:"fantom",16666e5:"harmony",43114:"avax",1285:"moonriver",80001:"mumbai",1313161554:"aurora",25:"cronos",180:"ame",19845:"btcix",11155111:"sepolia"}[n])&&n.toLowerCase()===a.networkName.toLowerCase()?[4,e.eth.getAccounts()]:(L.open({title:"Error",message:"We've detected that you need to switch your wallet's network from <b>"+n+"</b> to <b>"+a.networkName+"</b> network."}),[2]);case 2:return a=t.sent(),a=a[0],s({account:a}),a?(console.log("account connected:",a),b.dispatch("account connected")):g(),[2]}})})}function c(t,e,n){return new t.eth.Contract(e,n)}function f(t,e){return{farm:c(t,S,e.farmAddress),rewards:c(t,A,e.rewardsAddress),staking:c(t,H,e.stakingAddress)}}function m(t,e){return new window.BigNumber(t).times(new window.BigNumber(10).pow(e)).toString(10)}function y(t){if(!t)return t;if(/^\d+$/.test(t))return t;var e=Number(t).toFixed(5);return/0\.00000/.test(e)&&(e=Number(t).toFixed(8)),/0\.0000000/.test(e)?t:e}function v(t,e){var n;return t&&(n="function"==typeof t?t(e):t),n}var p,h,b=new(l.prototype.getEvent=function(t){var e=this.events[t];return e||(e=new r(t),this.events[t]=e),e},l.prototype.subscribe=function(t,e){t=this.getEvent(t);return t.addHandler(e),{event:t,handler:e}},l.prototype.unsubscribe=function(t,e){this.getEvent(t).removeHandler(e)},l.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.getEvent(t);t&&t.call.apply(t,e)},l.prototype.once=function(t,n){var a=this.getEvent(t),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.apply(void 0,t)&&a.removeHandler(s)};return a.addHandler(s),{event:a,handlerWrapper:s}},l),w=function(t){window.Web3?(t=new window.Web3(t),s({web3:t}),console.log("web3 initialized"),b.dispatch("web3 init")):L.open({message:"Web3 is required"})},g=function(){return k(void 0,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return console.log("Killing the wallet connection",h),h.close?[4,h.close()]:[3,2];case 1:t.sent(),h=null,t.label=2;case 2:return[4,p.clearCachedProvider()];case 3:return t.sent(),s({account:null}),console.log("finalize disconnect"),[2]}})})},M=function(){var t=x.opts;p=new window.Web3Modal.default({cacheProvider:!0,providerOptions:(null===(t=t.wallet)||void 0===t?void 0:t.providerOptions)||{},disableInjectedProvider:!1});try{localStorage.removeItem("walletconnect")}catch(t){}(window.web3ModalInstance=p).on("connect",function(t){return k(void 0,void 0,void 0,function(){return T(this,function(t){return console.log("web3modal initialized"),[2]})})}),p.on("disconnect",function(){return k(void 0,void 0,void 0,function(){return T(this,function(t){return console.log("web3modal disconnected"),[2]})})}),p.on("error",function(t){console.log("web3modal error:",t)}),p.cachedProvider},C=function(){return k(void 0,void 0,void 0,function(){var e;return T(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,p.connect()];case 1:return e=t.sent(),w(e),e.on("accountsChanged",function(t){console.log("provider account changed",t),d()}),e.on("chainChanged",function(t){console.log("provider chain changed",t),d()}),e.on("networkChanged",function(t){console.log("provider network changed",t),d()}),[4,d()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),[3,4];case 4:return[2]}})})},S=[{inputs:[{internalType:"address",name:"_rewardsToken",type:"address"},{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"uint256",name:"_rewardsDuration",type:"uint256"},{internalType:"uint256",name:"_stakingTokensDecimal",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Recovered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newDuration",type:"uint256"}],name:"RewardsDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRewardForDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastTimeRewardApplicable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"a",type:"uint256"},{internalType:"uint256",name:"b",type:"uint256"}],name:"min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"reward",type:"uint256"}],name:"notifyRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"periodFinish",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"n",type:"uint256"},{internalType:"uint256",name:"e",type:"uint256"}],name:"pow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"recoverERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_rewardsDuration",type:"uint256"}],name:"setRewardsDuration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingTokensDecimalRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],A=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"string"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"value",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"from",type:"address"}],name:"getAvailableBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokensMinted",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"value",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isMinter",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeFor",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"freezeOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_unfreezeTimestamp",type:"uint256"},{name:"_subsequentUnlock",type:"bool"}],name:"mintWithFreeze",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"maxSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}],H=A,q=new o({title:"Deposit",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to deposit:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Deposit</button>\n    </div>\n  ',onOpen:function(t){var n,s,e=this,i=t.contracts,o=t.stakingDecimals,a=t.stakingTokenSymbol,r=x.opts.networkName,u=x.account,l=!1,d=this.elems.root.querySelector(".ff-text-field-label"),c=this.elems.root.querySelector(".ff-text-field"),p=this.elems.root.querySelector(".ff-modal-buttons"),f=this.elems.root.querySelector(".ff-button");i.staking.methods.balanceOf(u).call().then(function(t){var e=y(Number(t)/Math.pow(10,o));s=t,n=e,d.innerHTML="Available to deposit: <b>"+e+" "+a+"</b> ",0<e&&((t=document.createElement("a")).className="ff-max-balance-button",t.innerHTML="<b>use max</b>",d.appendChild(t),t.addEventListener("click",function(){c.value=e}))}),f.addEventListener("click",function(){return k(e,void 0,void 0,function(){var e,a=this;return T(this,function(t){return l||0<(e=Number(c.value))&&(l=!0,f.disabled=!0,f.innerHTML='<div class="ff-loader"></div>',e=c.value===n?s:m(e,o),i.farm.methods.stake(e).send({from:u}).on("transactionHash",function(t){var e=document.createElement("div");e.classList.add("ff-transaction-link");var n="https://"+r.toLowerCase()+".etherscan.io/tx/"+t;"bsc"===r.toLowerCase()&&(n="https://bscscan.com/tx/"+t),"fantom"===r.toLowerCase()&&(n="https://ftmscan.com/tx/"+t),"harmony"===r.toLowerCase()&&(n="https://explorer.harmony.one/tx/"+t),"avax"===r.toLowerCase()&&(n="https://snowtrace.io/tx/"+t),"moonriver"===r.toLowerCase()&&(n="https://moonriver.moonscan.io/tx/"+t),"xdai"===r.toLowerCase()&&(n="https://blockscout.com/xdai/mainnet/tx/"+t),"aurora"===r.toLowerCase()&&(n="https://aurorascan.dev/tx/"+t),"cronos"===r.toLowerCase()&&(n="https://cronoscan.com/tx/"+t),"ame"===r.toLowerCase()&&(n="https://amescan.io/tx/"+t),"btcix"===r.toLowerCase()&&(n="https://btcixscan.com/tx/"+t),e.innerHTML='Pending transaction: <a href="'+n+'" target="_blank">'+t+"</a>",a.elems.content.insertBefore(e,p)}).on("error",function(t){console.error(t),L.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){b.dispatch("deposit success"),L.open({title:"Transaction successful",message:"Tokens were credited to the contract."})})),[2]})})})}}),E=new o({title:"Withdraw",content:'\n    <div class="ff-text-field-container">\n      <div class="ff-text-field-label">Available to withdraw:</div>\n      <input class="ff-text-field" type="text" value="" placeholder="0.0" />\n    </div>\n    <div class="ff-modal-buttons">\n      <button class="ff-button" type="button">Withdraw</button>\n    </div>\n  ',onOpen:function(t){var n,s,e=this,i=t.contracts,o=t.stakingDecimals,a=t.stakingTokenSymbol,r=x.opts.networkName,u=x.account,l=!1,d=this.elems.root.querySelector(".ff-text-field-label"),c=this.elems.root.querySelector(".ff-text-field"),p=this.elems.root.querySelector(".ff-modal-buttons"),f=this.elems.root.querySelector(".ff-button");i.farm.methods.balanceOf(u).call().then(function(t){var e=y(Number(t)/Math.pow(10,o));d.innerHTML="Available to withdraw: <b>"+e+" "+a+"</b>",s=t,n=e,d.innerHTML="Available to deposit: <b>"+e+" "+a+"</b> ",0<e&&((t=document.createElement("a")).className="ff-max-balance-button",t.innerHTML="<b>use max</b>",d.appendChild(t),t.addEventListener("click",function(){c.value=e}))}),f.addEventListener("click",function(){return k(e,void 0,void 0,function(){var e,a=this;return T(this,function(t){return l||0<(e=Number(c.value))&&(l=!0,f.disabled=!0,f.innerHTML='<div class="ff-loader"></div>',e=c.value===n?s:m(e,o),i.farm.methods.withdraw(e).send({from:u}).on("transactionHash",function(t){var e=document.createElement("div");e.classList.add("ff-transaction-link");var n="https://"+r.toLowerCase()+".etherscan.io/tx/"+t;"bsc"===r.toLowerCase()&&(n="https://bscscan.com/tx/"+t),"xdai"===r.toLowerCase()&&(n="https://blockscout.com/xdai/mainnet/tx/"+t),"fantom"===r.toLowerCase()&&(n="https://ftmscan.com/tx/"+t),"harmony"===r.toLowerCase()&&(n="https://explorer.harmony.one/tx/"+t),"avax"===r.toLowerCase()&&(n="https://snowtrace.io/tx/"+t),"moonriver"===r.toLowerCase()&&(n="https://moonriver.moonscan.io/tx/"+t),"aurora"===r.toLowerCase()&&(n="https://aurorascan.dev/tx/"+t),"cronos"===r.toLowerCase()&&(n="https://cronoscan.com/tx/"+t),"ame"===r.toLowerCase()&&(n="https://amescan.io/tx/"+t),"btcix"===r.toLowerCase()&&(n="https://btcixscan.com/tx/"+t),e.innerHTML='Pending transaction: <a href="'+n+'" target="_blank">'+t+"</a>",a.elems.content.insertBefore(e,p)}).on("error",function(t){console.error(t),L.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){b.dispatch("withdraw success"),L.open({title:"Transaction successful",message:"Tokens have been withdrawn to your address."})})),[2]})})})}});function B(t){var i=this;this.createButton=function(e,n){var a=e.innerHTML,s=!1;e.addEventListener("click",function(){return k(i,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return s?[2]:(s=!0,e.disabled=!0,e.innerHTML='<div class="ff-loader"></div>',[4,n()]);case 1:return t.sent(),e.disabled=!1,e.innerHTML=a,[2]}})})})},this.handleApproved=function(){i.elems.approveButton.classList.add("ff-hidden"),i.elems.earnSection.classList.remove("ff-hidden"),i.elems.stakeSection.classList.remove("ff-hidden"),i.elems.depositButton.addEventListener("click",function(){q.open({contracts:i.contracts,stakingDecimals:i.state.stakingDecimals,stakingTokenSymbol:i.state.stakingTokenSymbol})}),i.elems.withdrawButton.addEventListener("click",function(){E.open({contracts:i.contracts,stakingDecimals:i.state.stakingDecimals,stakingTokenSymbol:i.state.stakingTokenSymbol})}),i.createButton(i.elems.harvestButton,function(){return k(i,void 0,void 0,function(){var n,e;return T(this,function(t){return n=x.opts.networkName,e=x.account,[2,this.contracts.farm.methods.getReward().send({from:e}).on("transactionHash",function(t){var e="https://"+n.toLowerCase()+".etherscan.io/tx/"+t;"bsc"===n.toLowerCase()&&(e="https://bscscan.com/tx/"+t),"xdai"===n.toLowerCase()&&(e="https://blockscout.com/xdai/mainnet/tx/"+t),"fantom"===n.toLowerCase()&&(e="https://ftmscan.com/tx/"+t),"harmony"===n.toLowerCase()&&(e="https://explorer.harmony.one/tx/"+t),"avax"===n.toLowerCase()&&(e="https://snowtrace.io/tx/"+t),"moonriver"===n.toLowerCase()&&(e="https://moonriver.moonscan.io/tx/"+t),"aurora"===n.toLowerCase()&&(e="https://aurorascan.dev/tx/"+t),"cronos"===n.toLowerCase()&&(e="https://cronoscan.com/tx/"+t),"ame"===n.toLowerCase()&&(e="https://amescan.io/tx/"+t),"btcix"===n.toLowerCase()&&(e="https://btcixscan.com/tx/"+t),console.log("Harvest trx:",e)}).on("error",function(t){console.error(t),L.open({title:"Transaction failed",message:"Something went wrong. Try again later."})}).then(function(){b.dispatch("harvest success"),L.open({title:"Transaction successful",message:"Tokens have been transferred to your address."})})]})})})},this.initCommon=function(){return k(i,void 0,void 0,function(){var s,i,o,r,u,l,d,c,p=this;return T(this,function(t){switch(t.label){case 0:return u=this.opts,s=u.farmAddress,i=u.rewardsAddress,d=u.stakingAddress,o=x.opts.networkName,u={mainnet:"https://mainnet.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",sepolia:"https://sepolia.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",goerli:"https://goerli.infura.io/v3/7213b5d53a4943b7af08a9cfce1cf2e2",matic:"https://polygon-rpc.com/",mumbai:"https://rpc-mumbai.maticvigil.com",bsc:"https://bsc-dataseed1.binance.org:443",bsc_test:"https://data-seed-prebsc-1-s1.binance.org:8545",xdai:"https://rpc.xdaichain.com",aurora:"https://mainnet.aurora.dev",fantom:"https://rpc.ftm.tools/",harmony:"https://api.harmony.one",avax:"https://api.avax.network/ext/bc/C/rpc",moonriver:"https://rpc.moonriver.moonbeam.network",cronos:"https://evm.cronos.org",ame:"https://node1.amechain.io/",btcix:"https://seed.btcix.org/rpc"}[o.toLowerCase()],o=new window.Web3(window.Web3.givenProvider||window.ethereum||u),u=this,[4,f(o,{farmAddress:s,rewardsAddress:i,stakingAddress:d})];case 1:return u.readContracts=t.sent(),[4,Promise.all([this.readContracts.staking.methods.symbol().call(),this.readContracts.staking.methods.decimals().call(),this.readContracts.rewards.methods.symbol().call(),this.readContracts.rewards.methods.decimals().call()])];case 2:return d=t.sent(),r=d[0],u=d[1],l=d[2],d=d[3],this.state.stakingTokenSymbol=r,this.state.rewardsTokenSymbol=l,this.state.stakingDecimals=u,this.state.rewardsDecimals=d,this.elems.rewardsTokenSymbol.innerHTML=l,this.elems.stakingTokenSymbol.innerHTML=r,"function"==typeof this.opts.title?this.elems.title.innerHTML=this.opts.title(r,l):"string"==typeof this.opts.title?this.elems.title.innerHTML=this.opts.title:this.elems.title.innerHTML=l+"-"+r,e=this.opts,a=(n={stakingTokenSymbol:r,rewardsTokenSymbol:l}).stakingTokenSymbol,n=n.rewardsTokenSymbol,a=v(e.stakingTokenIcon,a),n=v(e.rewardsTokenIcon,n),d=a||n?{staking:a,rewards:n}:null,this.elems.tokenIcons.innerHTML=d?"\n        "+(d.rewards?'<img class="ff-widget-token-icon" src="'+d.rewards+'" />':"")+"\n        "+(d.staking?'<img class="ff-widget-token-icon" src="'+d.staking+'" />':"")+"\n      ":"",this.elems.apyValue&&("function"==typeof this.opts.apy?this.opts.apy().then(function(t){p.elems.apyValue.innerHTML=t+"%"}):this.elems.apyValue.innerHTML=this.opts.apy+"%"),this.elems.aprValue&&("function"==typeof this.opts.apr?this.opts.apr().then(function(t){p.elems.aprValue.innerHTML=""+t}):this.elems.aprValue.innerHTML=""+this.opts.apr),this.opts.detailsLink?(d=void 0,d="function"==typeof this.opts.detailsLink?this.opts.detailsLink(r,l):this.opts.detailsLink,(c=document.createElement("a")).classList.add("ff-widget-details"),c.innerText="Details",c.href=d,this.elems.root.appendChild(c)):this.opts.detailsClick&&((c=document.createElement("div")).classList.add("ff-widget-details"),c.innerText="Details",c.onclick=function(){p.opts.detailsClick(r,l)},this.elems.root.appendChild(c)),this.elems.depositTokenName.innerHTML=r,this.elems.earnTokenName.innerHTML=l,this.initTimer(),[2]}var e,n,a})})},this.init=function(){return k(i,void 0,void 0,function(){var e,n,a,s;return T(this,function(t){return s=this.opts,e=s.farmAddress,n=s.rewardsAddress,a=s.stakingAddress,s=x.web3,this.elems.unlockButton.classList.add("ff-hidden"),this.contracts=f(s,{farmAddress:e,rewardsAddress:n,stakingAddress:a}),this.updateValues(),b.subscribe("harvest success",this.updateValues),b.subscribe("deposit success",this.updateValues),b.subscribe("withdraw success",this.updateValues),[2]})})},this.initTimer=function(){return k(i,void 0,void 0,function(){var e,n,s,i=this;return T(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.readContracts.farm.methods.periodFinish().call()];case 1:return e=t.sent(),[3,3];case 2:return n=t.sent(),console.error(n),[2];case 3:return 0<(s=Number(e.toString()))-Date.now()/1e3?setInterval(function(){var t=Math.floor((1e3*s-Date.now())/1e3),e=Math.floor(t/86400);t-=86400*e;var n=Math.floor(t/3600)%24;t-=3600*n;var a=Math.floor(t/60)%60,t=(t-=60*a)%60,t=(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(a<10?"0"+a:a)+":"+(t<10?"0"+t:t);i.elems.timer.innerHTML=t},1e3):this.elems.timer.innerHTML="Farming not started yet",[2]}})})},this.updateValues=function(){return k(i,void 0,void 0,function(){var e,n,a,s;return T(this,function(t){switch(t.label){case 0:return a=x.account,[4,Promise.all([this.readContracts.farm.methods.balanceOf(a).call(),this.readContracts.farm.methods.earned(a).call(),this.readContracts.staking.methods.allowance(a,this.opts.farmAddress).call()])];case 1:return s=t.sent(),e=s[0],n=s[1],a=s[2],0===Number(a)?this.elems.approveButton.classList.remove("ff-hidden"):this.handleApproved(),s=this.state,a=s.stakingDecimals,s=s.rewardsDecimals,this.elems.earnedAmount.innerText=y(n/Math.pow(10,s)),this.elems.stakedAmount.innerText=y(e/Math.pow(10,a)),0<n&&(this.elems.harvestButton.disabled=!1),0<e&&(this.elems.withdrawButton.disabled=!1),this.elems.depositButton.disabled=!1,[2]}})})},this.opts=t,this.elems={},this.state={};var e=t.farmAddress,n=t.rewardsAddress,a=t.stakingAddress;if(!e||!n||!a)throw new Error('Widget requires "farmAddress", "rewardsAddress", "stakingAddress" options');this.injectHtml(t),this.initCommon(),b.subscribe("account connected",this.init)}return{init:function(n){return k(void 0,void 0,void 0,function(){return T(this,function(t){if(!n)throw new Error("options required");if("https:"!==location.protocol)throw new Error("FarmFactory requires HTTPS connection");var e;return s({opts:n}),(e=document.createElement("div")).setAttribute("id",i),document.body.appendChild(e),M(),[2]})})},Widget:(B.prototype.injectHtml=function(s){var t=this,e=document.getElementById(s.selector);e.classList.add("ff-widget"),e.innerHTML=(g={withAPY:Boolean(this.opts.apy),withAPR:Boolean(this.opts.apr),apyLabel:this.opts.apyLabel,aprLabel:this.opts.aprLabel},h=g.withAPY,w=g.withAPR,b=void 0===(b=g.apyLabel)?"APY":b,g=g.aprLabel,'\n  <div class="ff-widget-headline">\n    <div class="ff-widget-token-icons">\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-token-icon">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>\n    <div class="ff-title-and-timer">\n      <div class="ff-widget-title">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div class="ff-widget-timer">--:--:--:--</div>\n    </div>\n  </div>\n  <div class="ff-widget-section ff-widget-stats">\n    '+(h?'\n      <div class="ff-widget-row2">\n        <div class="ff-widget-label">'+b+':</div>\n        <div class="ff-widget-value ff-widget-apy">\n          <span class="ff-skeleton"></span>\n        </div>\n      </div>\n    ':"")+"\n    "+(w?'\n      <div class="ff-widget-row2">\n        <div class="ff-widget-label">'+(void 0===g?"APR":g)+':</div>\n        <div class="ff-widget-value ff-widget-apr">\n          <span class="ff-skeleton"></span>\n        </div>\n      </div>\n    ':"")+'  \n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">Deposit:</div>\n      <div class="ff-widget-value ff-widget-deposit-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>  \n    <div class="ff-widget-row2">\n      <div class="ff-widget-label">Earn:</div>\n      <div class="ff-widget-value ff-widget-earn-token-name">\n        <span class="ff-skeleton"></span>\n      </div>\n    </div>  \n  </div>\n  <div class="ff-widget-section ff-widget-earn-section ff-hidden">\n    <div class="ff-widget-section-title">\n      <b class="ff-rewards-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Earned\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-earned-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-harvest-button" type="button" disabled>Harvest</button>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-section ff-widget-stake-section ff-hidden">\n    <div class="ff-widget-section-title">\n      <b class="ff-staking-token-name">\n        <span class="ff-skeleton"></span>\n      </b> Staked\n    </div>\n    <div class="ff-widget-row">\n      <div class="ff-widget-value ff-widget-staked-amount">\n        <span class="ff-skeleton"></span>\n      </div>\n      <div>\n        <button class="ff-button ff-widget-deposit-button" type="button" disabled>Deposit</button>\n        <button class="ff-button ff-widget-withdraw-button" type="button" disabled>Withdraw</button>\n      </div>\n    </div>\n  </div>\n  <div class="ff-widget-footer">\n    <button id="connect-wallet" class="ff-button ff-widget-unlock-button" type="button">Connect wallet</button>\n    <button class="ff-button ff-widget-approve-button ff-hidden" type="button">Approve contract</button>\n  </div>\n');var n=e.querySelector(".ff-widget-token-icons"),a=e.querySelector(".ff-widget-title"),i=e.querySelector(".ff-widget-timer"),o=e.querySelector(".ff-rewards-token-name"),r=e.querySelector(".ff-staking-token-name"),u=e.querySelector(".ff-widget-apy"),l=e.querySelector(".ff-widget-apr"),d=e.querySelector(".ff-widget-deposit-token-name"),c=e.querySelector(".ff-widget-earn-token-name"),p=e.querySelector(".ff-widget-earn-section"),f=e.querySelector(".ff-widget-stake-section"),m=e.querySelector(".ff-widget-earned-amount"),y=e.querySelector(".ff-widget-staked-amount"),v=e.querySelector(".ff-widget-unlock-button"),h=e.querySelector(".ff-widget-approve-button"),b=e.querySelector(".ff-widget-deposit-button"),w=e.querySelector(".ff-widget-withdraw-button"),g=e.querySelector(".ff-widget-harvest-button");this.elems={root:e,tokenIcons:n,title:a,timer:i,rewardsTokenSymbol:o,stakingTokenSymbol:r,apyValue:u,aprValue:l,depositTokenName:d,earnTokenName:c,earnSection:p,stakeSection:f,earnedAmount:m,stakedAmount:y,unlockButton:v,approveButton:h,depositButton:b,withdrawButton:w,harvestButton:g},v.addEventListener("click",function(){C()}),this.createButton(h,function(){return k(t,void 0,void 0,function(){var e,n,a;return T(this,function(t){switch(t.label){case 0:n=x.web3,a=x.account,e=s.farmAddress,n=n.utils.toBN("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.contracts.staking.methods.approve(e,n).send({from:a})];case 2:return t.sent(),this.handleApproved(),[3,4];case 3:return a=t.sent(),console.error(a),L.open(a.message),[3,4];case 4:return[2]}})})})},B)}}();
